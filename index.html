<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>チンチロライク</title>
<style>
    body {
        font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
        background-color: #1a1a1a;
        color: white;
        text-align: center;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px 0;
        box-sizing: border-box;
    }
    #game-container {
        width: 95%;
        max-width: 550px;
        background-color: #2d2d2d;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    /* ステータス表示 */
    .status-bar {
        width: 100%;
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
        padding: 10px;
        background: #444;
        border-radius: 8px;
        font-size: 14px;
        box-sizing: border-box;
    }
    .target-score {
        color: #ff4757;
        font-weight: bold;
        font-size: 24px;
        margin-bottom: 10px;
        text-shadow: 0 0 10px rgba(255, 71, 87, 0.4);
    }
    /* くもん式用表示 */
    #kumon-status {
        width: 100%;
        background-color: #333;
        color: #2ed573;
        padding: 5px;
        border-radius: 5px;
        margin-bottom: 15px;
        font-weight: bold;
        display: none; 
    }

    /* サイコロ */
    #dice-area {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
        margin: 20px 0;
        min-height: 80px;
    }
    .dice {
        font-size: 50px;
        width: 65px;
        height: 65px;
        background: white;
        color: #333;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 0 #999;
        position: relative;
        transition: transform 0.2s, background-color 0.2s, opacity 0.3s;
        cursor: pointer;
        user-select: none;
    }
    .dice:active { transform: scale(0.95); }
    
    .dice.red { color: #ff4757; }
    .dice.changed { background-color: #ffd700; transform: scale(1.1); }
    
    .dice.locked {
        background-color: #b2bec3;
        border: 3px solid #3742fa;
        transform: translateY(2px);
        box-shadow: 0 2px 0 #666;
    }
    .dice.locked::after {
        content: 'LOCK';
        position: absolute;
        top: -10px;
        right: -5px;
        font-size: 10px;
        background: #3742fa;
        color: white;
        padding: 1px 4px;
        border-radius: 4px;
        font-weight: bold;
    }

    .dice.fixed-six {
        border: 3px solid #ffd700;
        background: #fffbe6;
    }
    .dice.fixed-six::after {
        content: '★';
        position: absolute;
        top: -10px;
        left: -5px;
        font-size: 12px;
        color: #ffd700;
        text-shadow: 0 0 2px black;
    }

    .dice.unused {
        opacity: 0.3;
        transform: scale(0.9);
        box-shadow: none;
    }
    
    #message { font-size: 16px; height: 24px; color: #bbb; margin-bottom: 5px; }
    #result-yaku {
        font-size: 32px;
        font-weight: bold;
        color: #ffd700;
        min-height: 45px;
        height: auto;
        margin-bottom: 30px;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        line-height: 1.2;
        word-wrap: break-word;
    }

    /* ボタン */
    button {
        background-color: #ff4757;
        color: white;
        border: none;
        padding: 15px 0;
        width: 100%;
        font-size: 18px;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.1s, background-color 0.3s;
        margin-bottom: 20px;
    }
    button:active { transform: scale(0.95); }
    button:disabled { background-color: #555; cursor: not-allowed; }
    
    .btn-clear {
        background-color: #ffd700 !important;
        color: #333 !important;
        font-weight: bold;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    }
    .btn-kumon {
        background-color: #2ed573 !important;
        box-shadow: 0 0 15px rgba(46, 213, 115, 0.5);
    }

    #reroll-btn {
        background-color: #3742fa;
        font-size: 14px;
        padding: 10px;
        margin-top: 15px;
        width: 60%;
    }
    #reroll-btn:disabled { background-color: #555; }

    /* 全体倍率表示エリア */
    .global-mult-box {
        width: 100%;
        background: linear-gradient(90deg, #333, #444, #333);
        border: 1px solid #ffd700;
        color: #ffd700;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 5px;
        font-size: 18px;
        font-weight: bold;
        box-sizing: border-box;
        text-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
    }

    /* 点数表 */
    .score-table {
        width: 100%;
        background: #333;
        border-radius: 8px;
        padding: 10px;
        font-size: 12px;
        text-align: left;
        box-sizing: border-box;
        border: 1px solid #555;
    }
    .score-table h3 { margin: 0 0 5px 0; font-size: 14px; color: #ddd; text-align: center; }
    .score-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding: 3px 0; }
    .score-row:last-child { border-bottom: none; }
    .score-row.hidden-yaku { border-top: 2px solid #a55eea; } /* 隠し役を目立たせる */
    .score-name { color: #ffd700; }
    .score-val { color: #fff; font-weight: bold; transition: color 0.3s; }
    .score-val.updated { color: #2ed573; }
    .bad { color: #a4b0be; }

    /* モーダル */
    .modal-overlay {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.95);
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 15px;
        z-index: 10;
        padding: 20px;
        box-sizing: border-box;
    }
    .card-container { display: flex; flex-direction: column; gap: 10px; width: 90%; }
    .powerup-card {
        background: #333; border: 2px solid #555; padding: 10px;
        border-radius: 10px; cursor: pointer; text-align: left;
        border-left: 5px solid #777;
    }
    .powerup-card:hover { border-color: #ffd700; background: #444; }
    
    .card-type-rare { border-left-color: #ffd700; }
    .card-type-risk { border-left-color: #ff4757; }
    .card-type-safe { border-left-color: #2ed573; }
    .card-type-special { border-left-color: #a55eea; }
    .card-type-tech { border-left-color: #3742fa; }
    .card-type-prestige { border-left: 5px solid #fff; border-right: 5px solid #a55eea; background: linear-gradient(90deg, #333, #444); }
    .card-type-ascendancy { border-left: 5px solid #fff; border-right: 5px solid #fff; background: #222; }

    .card-title { color: #fff; font-weight: bold; margin-bottom: 3px; font-size: 16px; }
    .card-desc { font-size: 12px; color: #ccc; }
    
    /* 新規ルールモーダルのスタイル */
    #rules-modal {
        justify-content: flex-start;
        padding-top: 50px;
        z-index: 30; /* 最前面に */
    }
    .rules-content {
        background-color: #2d2d2d;
        width: 90%;
        max-width: 500px;
        height: 80vh; 
        border-radius: 10px;
        padding: 20px;
        overflow-y: auto; 
        text-align: left;
    }
    .rules-content h3 { color: #ffd700; border-bottom: 1px solid #444; padding-bottom: 5px; margin-top: 15px; }
    .rules-content ul { padding-left: 20px; font-size: 14px; }
    .rules-content li { margin-bottom: 5px; }
    #close-rules-btn {
        margin-top: 20px;
        width: 50%;
        padding: 10px;
        background-color: #555;
    }

</style>
</head>
<body>

<div id="game-container">
    <div class="status-bar">
        <div>STAGE: <span id="stage-num">1</span></div>
        <div style="font-size:12px; max-width: 60%; text-align:right;">所持バフ:<br><span id="buff-list" style="color:#aaa;">なし</span></div>
    </div>
    
    <div>目標: <span id="target-score" class="target-score">100</span> pt</div>
    <div id="kumon-status">積立済み: <span id="kumon-score">0</span> pt</div>

    <div id="dice-area"></div>

    <div id="message">サイコロを振ってください</div>
    <div id="result-yaku"></div>

    <button id="roll-btn" onclick="rollDice()">振る (残り3回)</button>

    <div class="global-mult-box">
        全体倍率: <span id="global-mult-display">x1.0</span> <span style="font-size:12px; color:#aaa;">(最終スコアに乗算)</span>
    </div>

    <div class="score-table">
        <h3>▼ 役の基礎点 (役倍率のみ反映) ▼</h3>
        
        <div class="score-row hidden-yaku" id="row-long-straight" style="display:none;">
            <span class="score-name" id="lbl-long-straight">ロングストレート (1-5 / 2-6)</span>
            <span class="score-val" id="sv-long-straight">15000</span>
        </div>
        <div class="score-row hidden-yaku" id="row-five-of-a-kind" style="display:none;">
            <span class="score-name" id="lbl-five-of-a-kind">ファイブオブアカインド (5ゾロ)</span>
            <span class="score-val" id="sv-five-of-a-kind">50000</span>
        </div>

        <div class="score-row"><span class="score-name">ピンゾロ (1-1-1)</span><span class="score-val" id="sv-pinzorou">5000</span></div>
        <div class="score-row"><span class="score-name">アラシ (ゾロ目)</span><span class="score-val" id="sv-arashi">3000</span></div>
        <div class="score-row"><span class="score-name" id="lbl-sigoro">シゴロ (4-5-6)</span><span class="score-val" id="sv-sigoro">2000</span></div>
        <div class="score-row"><span class="score-name">通常の目 (例:1-6-6)</span><span class="score-val" id="sv-normal">出目 × 100</span></div>
        <div class="score-row"><span class="score-name bad" id="lbl-hifumi">ヒフミ (1-2-3)</span><span class="score-val bad" id="sv-hifumi">即死</span></div>
        <div class="score-row"><span class="score-name bad">役なし</span><span class="score-val bad">0 (失敗)</span></div>
    </div>

    <div id="common-modal" class="modal-overlay">
        <h2 id="modal-title" style="color:#ffd700;">ASCENDANCY</h2>
        <p id="modal-desc" style="color:#ddd; margin-top:0;">開始時の能力を選択してください</p>
        
        <button id="open-rules-btn" style="width:90%; padding: 10px; margin-bottom: 15px; background-color: #555;">ルールを確認</button>
        
        <div class="card-container" id="card-container"></div>
        <button id="reroll-btn" style="display:none;" onclick="rerollPowerups()">リロール (残り3回)</button>
    </div>

    <div id="ending-modal" class="modal-overlay" style="z-index: 20; display:none;">
        <h2 style="color:#ffd700; font-size:40px; margin-bottom:10px;">CONGRATULATIONS!!</h2>
        <p style="color:white; margin:0 0 30px 0; line-height:1.5;">ステージ20 完全制覇！<br>伝説のギャンブラーとして名を刻みました。</p>
        <div style="display:flex; gap:15px; width:90%; justify-content:center;">
            <button onclick="goEndless()" style="width:48%; background:#a55eea; font-size:14px;">永遠に続ける</button>
            <button onclick="resetGame()" style="width:48%; background:#555; font-size:14px;">タイトルへ</button>
        </div>
    </div>

    <div id="overlay" class="modal-overlay" style="background:rgba(0,0,0,0.9);">
        <h2 id="overlay-title">GAME OVER</h2>
        <p id="overlay-msg">...</p>
        <button id="restart-btn" onclick="resetGame()" style="width:80%; margin-top:20px; background:#2ed573;">最初から遊ぶ</button>
    </div>
</div>

<div id="rules-modal" class="modal-overlay">
    <div class="rules-content">
        <h2 style="color:#ffd700; text-align:center; margin-top:0;">チンチロライク - ゲームルール</h2>
        
        <h3>1. 基本ルール</h3>
        <ul>
            <li>サイコロを振って役を作り、目標点数クリアを目指します。</li>
            <li>振れる回数は最大3回です（能力などで増減します）。</li>
            <li>スコアが目標点に達するとステージクリア、達しないまま振れる回数がなくなるとゲームオーバーです。</li>
        </ul>

        <h3>2. 役と基礎点 (役倍率のみ反映)</h3>
        <ul style="list-style: none; padding-left: 0;">
            <li style="color:#2ed573; font-weight:bold;">ピンゾロ (1-1-1)：5000点</li>
            <li style="color:#2ed573; font-weight:bold;">アラシ (ゾロ目)：3000点</li>
            <li style="color:#2ed573; font-weight:bold;">シゴロ (4-5-6)：2000点</li>
            <li>通常の目 (ペア+数字)：ペアにならなかった出目 × 100点</li>
            <li style="color:#ff4757; font-weight:bold;">ヒフミ (1-2-3)：**ペナルティ (残り回数-1)**</li>
            <li style="color:#ff4757;">役なし：0点 (失敗)</li>
        </ul>
        <p style="font-size: 12px; color:#aaa; margin-top: 5px;">※最終スコアは (基礎点 × 役倍率) × 全体倍率 で計算されます。</p>
        <p style="font-size: 12px; color:#aaa; margin-top: 5px;">※隠された役が存在するかも……？。</p>

        <h3>3. 能力 (バフ) の獲得</h3>
        <ul>
            <li>**ASCENDANCY**: ゲーム開始時に選択。ゲーム全体に大きく影響する能力。</li>
            <li>**PRESTIGE**: 5ステージごとに選択。強力な上級能力。</li>
            <li>**通常パワーアップ**: 通常ステージクリア時に選択。役の倍率やゲームロジックを強化。</li>
            <li>**リロール**: 能力選択時に、リロール回数を消費して選択肢を再生成できます。</li>
        </ul>        
    </div>
    <button id="close-rules-btn" style="width:90%; max-width: 500px; padding: 15px; margin-top: 30px; background-color: #3742fa;">ゲームに戻る</button>
</div>
<script>
 const _0x1ccdd1=_0x3cb8;(function(_0x382683,_0x37bed7){const _0x36fce1=_0x3cb8,_0x162d1a=_0x382683();while(!![]){try{const _0x4aa81f=parseInt(_0x36fce1(0x162))/0x1*(parseInt(_0x36fce1(0xf9))/0x2)+parseInt(_0x36fce1(0x101))/0x3*(parseInt(_0x36fce1(0x189))/0x4)+-parseInt(_0x36fce1(0x160))/0x5*(parseInt(_0x36fce1(0x186))/0x6)+-parseInt(_0x36fce1(0x110))/0x7+parseInt(_0x36fce1(0x16c))/0x8*(parseInt(_0x36fce1(0x102))/0x9)+parseInt(_0x36fce1(0x107))/0xa*(parseInt(_0x36fce1(0xd4))/0xb)+-parseInt(_0x36fce1(0x190))/0xc*(-parseInt(_0x36fce1(0x122))/0xd);if(_0x4aa81f===_0x37bed7)break;else _0x162d1a['push'](_0x162d1a['shift']());}catch(_0xc7c6ce){_0x162d1a['push'](_0x162d1a['shift']());}}}(_0x348b,0xe03a3));let state={'stage':0x1,'targetScore':0x64,'rollCount':0x0,'maxRolls':0x3,'diceCount':0x3,'rerollsRemaining':0x3,'dice':[],'lockedIndices':[],'kumonScore':0x0,'isEndless':![],'selectionContext':null,'buffs':{'diceLimit':null,'scoreMult':0x1,'zoroBonus':0x0,'normalEyeBonus':0x0,'sigoroBonus':0x0,'extraRoll':0x0,'maxLocks':0x0,'hasLimitDice':![],'hifumiReversal':![],'haiteiBonus':0x0,'iaiBonus':0x0,'fixedSix':![],'straightMaster':![],'isKumon':![],'carryOver':![]},'hiddenYaku':{'fiveOfAKind':![],'longStraight':![]}};const YAKU_SCORES={'pinzorou':0x1388,'arashi':0xbb8,'sigoro':0x7d0,'hifumi':0x0,'nashi':0x0,'hifumi_rev':0xbb8,'fiveOfAKind':0xc350,'longStraight':0x3a98},els={'diceArea':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xef)),'msg':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x139)),'yaku':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xb9)),'btn':document['getElementById']('roll-btn'),'stage':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x19a)),'target':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x16b)),'buffs':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xfd)),'modal':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x15c)),'modalTitle':document['getElementById'](_0x1ccdd1(0x1a6)),'modalDesc':document[_0x1ccdd1(0x13b)]('modal-desc'),'cards':document['getElementById'](_0x1ccdd1(0x196)),'rerollBtn':document[_0x1ccdd1(0x13b)]('reroll-btn'),'overlay':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xec)),'ovTitle':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xbb)),'ovMsg':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x167)),'globalMult':document['getElementById'](_0x1ccdd1(0x179)),'kumonStatus':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xb7)),'kumonScore':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x164)),'endingModal':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0x10b)),'rulesModal':document['getElementById'](_0x1ccdd1(0x178)),'openRulesBtn':document[_0x1ccdd1(0x13b)](_0x1ccdd1(0xfe)),'closeRulesBtn':document['getElementById']('close-rules-btn')},ASCENDANCY_POOL=[{'title':_0x1ccdd1(0x11e),'desc':_0x1ccdd1(0xa2),'apply':_0x4286fd=>{const _0x314312=_0x1ccdd1;_0x4286fd['buffs']['diceLimit']=_0x314312(0x148),_0x4286fd[_0x314312(0x1a0)][_0x314312(0xac)]+=0x3,_0x4286fd[_0x314312(0x1a0)][_0x314312(0xb4)]=!![];}},{'title':_0x1ccdd1(0xf6),'desc':_0x1ccdd1(0xc0),'apply':_0x1dadd4=>{const _0x37de46=_0x1ccdd1;_0x1dadd4['buffs'][_0x37de46(0x117)]=_0x37de46(0xe1),_0x1dadd4['buffs'][_0x37de46(0xac)]-=0.5,_0x1dadd4['buffs'][_0x37de46(0xb4)]=!![];}},{'title':'ピンフ・タンヤオ','desc':_0x1ccdd1(0x149),'apply':_0x295c42=>{const _0x1a5fba=_0x1ccdd1;_0x295c42[_0x1a5fba(0x1a0)][_0x1a5fba(0x117)]=_0x1a5fba(0xae),_0x295c42[_0x1a5fba(0x1a0)][_0x1a5fba(0xb4)]=!![],_0x295c42['buffs'][_0x1a5fba(0xd8)]=!![];}},{'title':_0x1ccdd1(0xea),'desc':'スコアが足りない場合、スコアをそのまま加算して振りなおす。どんなもんだい','apply':_0x3f700f=>{const _0x4bdc2d=_0x1ccdd1;_0x3f700f[_0x4bdc2d(0x1a0)][_0x4bdc2d(0x13d)]=!![],els[_0x4bdc2d(0x12a)][_0x4bdc2d(0x180)][_0x4bdc2d(0xd9)]=_0x4bdc2d(0x11c);}},{'title':'ファイブオブアカインド','desc':_0x1ccdd1(0x150),'apply':_0x5ebd9d=>{const _0x18413f=_0x1ccdd1;_0x5ebd9d[_0x18413f(0xfa)]=0x5;}},{'title':'天運','desc':'全体倍率+100%、リロール+5、振れる回数+2。それでいい。神とサイコロは無口でいい','apply':_0x39a166=>{const _0x17d6e5=_0x1ccdd1;_0x39a166[_0x17d6e5(0x1a0)]['scoreMult']+=0x1,_0x39a166['rerollsRemaining']+=0x5,_0x39a166[_0x17d6e5(0x1a0)][_0x17d6e5(0x17b)]+=0x2;}},{'title':_0x1ccdd1(0x15a),'desc':_0x1ccdd1(0xa8),'apply':_0x85994f=>{}}],PRESTIGE_POOL=[{'id':_0x1ccdd1(0x13a),'title':_0x1ccdd1(0x112),'desc':'【技術】振った後のサイコロをタップして出目を1つ固定できる(最大2個)','type':_0x1ccdd1(0xf8),'weight':0x64,'unique':![],'apply':_0x2c8325=>{const _0x1656f0=_0x1ccdd1;_0x2c8325['buffs'][_0x1656f0(0x19b)]++;}},{'id':_0x1ccdd1(0x19d),'title':_0x1ccdd1(0x123),'desc':_0x1ccdd1(0x181),'type':_0x1ccdd1(0xf8),'weight':0x64,'unique':!![],'apply':_0x11fbb9=>{const _0x2ff5b9=_0x1ccdd1;_0x11fbb9[_0x2ff5b9(0x1a0)][_0x2ff5b9(0xd8)]=!![];}},{'id':_0x1ccdd1(0x195),'title':_0x1ccdd1(0x188),'desc':'【特殊】一度に振るサイコロの数+1。もっとも点数が高くなる組み合わせで得点を計算する。ただし他に役が無い場合はヒフミが優先される','type':_0x1ccdd1(0xf8),'weight':0x64,'unique':![],'apply':_0x5795e9=>{const _0x7091cf=_0x1ccdd1;_0x5795e9[_0x7091cf(0xfa)]++;}},{'id':_0x1ccdd1(0x1aa),'title':'起死回生','desc':'【特殊】「ヒフミ(1-2-3)」のペナルティ(振れる回数の減少)を無効化する','type':_0x1ccdd1(0xf8),'weight':0x64,'unique':!![],'apply':_0x2b3123=>{_0x2b3123['buffs']['hifumiReversal']=!![];}},{'id':'power','title':'筋トレ','desc':_0x1ccdd1(0x1b0),'type':'prestige','weight':0x64,'apply':_0x5df811=>{const _0x45df81=_0x1ccdd1;_0x5df811[_0x45df81(0x1a0)][_0x45df81(0xac)]+=1.5;}},{'id':'carry_over','title':_0x1ccdd1(0x1a2),'desc':_0x1ccdd1(0x158),'type':'prestige','weight':0x64,'unique':!![],'apply':_0xc1ba88=>{const _0x85584e=_0x1ccdd1;_0xc1ba88[_0x85584e(0x1a0)][_0x85584e(0x103)]=!![];}}],POWERUP_POOL=[{'id':'sigoro_boost','title':_0x1ccdd1(0x105),'desc':_0x1ccdd1(0x134),'type':'safe','weight':0x64,'apply':_0x58a315=>{const _0x22c6df=_0x1ccdd1;_0x58a315[_0x22c6df(0x1a0)][_0x22c6df(0x161)]+=0x2;}},{'id':_0x1ccdd1(0x166),'title':_0x1ccdd1(0x1b2),'desc':_0x1ccdd1(0xca),'type':'risk','weight':0x64,'unique':![],'apply':_0x2af08d=>{const _0x1c38ec=_0x1ccdd1;_0x2af08d[_0x1c38ec(0x1a0)][_0x1c38ec(0x135)]+=0x1;}},{'id':'haitei','title':_0x1ccdd1(0xb6),'desc':_0x1ccdd1(0xa5),'type':_0x1ccdd1(0x193),'weight':0x64,'unique':![],'apply':_0x4fbe06=>{const _0x298192=_0x1ccdd1;_0x4fbe06[_0x298192(0x1a0)]['haiteiBonus']+=0x2;}},{'id':_0x1ccdd1(0x118),'title':_0x1ccdd1(0xe3),'desc':_0x1ccdd1(0x154),'type':_0x1ccdd1(0xe4),'weight':0x64,'apply':_0x281d79=>{const _0x586083=_0x1ccdd1;_0x281d79[_0x586083(0x1a0)][_0x586083(0xe6)]+=0x3;}},{'id':'normal_boost','title':_0x1ccdd1(0x16a),'desc':'【役倍率】通常の目(ペア+数字)の得点が+300%。','type':_0x1ccdd1(0x106),'weight':0x64,'apply':_0x39a583=>{const _0x45b0f6=_0x1ccdd1;_0x39a583[_0x45b0f6(0x1a0)][_0x45b0f6(0x141)]+=0x3;}},{'id':_0x1ccdd1(0x187),'title':'深呼吸','desc':_0x1ccdd1(0x11a),'type':'safe','weight':0x50,'unique':![],'apply':_0x256806=>{_0x256806['rerollsRemaining']+=0x3;}},{'id':_0x1ccdd1(0x137),'title':_0x1ccdd1(0xde),'desc':'【安定】サイコロを振れる回数が1回増える','type':_0x1ccdd1(0x106),'weight':0x64,'apply':_0x7b9822=>{const _0x22d251=_0x1ccdd1;_0x7b9822[_0x22d251(0x1a0)][_0x22d251(0x17b)]+=0x1;}},{'id':_0x1ccdd1(0x18e),'title':'縮小','desc':'【全体倍率】サイコロを振れる回数が1回減るが、全体倍率+100%','type':_0x1ccdd1(0x193),'weight':0x64,'apply':_0x326a11=>{const _0x5ad5f2=_0x1ccdd1;_0x326a11[_0x5ad5f2(0x1a0)][_0x5ad5f2(0x17b)]-=0x1,_0x326a11[_0x5ad5f2(0x1a0)][_0x5ad5f2(0xac)]+=0x1;}}];function _0x348b(){const _0x2fa510=['開始時の能力を選択してください','\x20:\x20','modal-title','sv-sigoro','ゾロ)','fiveOfAKind','hifumi_rev','includes','diceArea','cards','target','一二三','【全体倍率】全てのスコア倍率が+150%\x20(累積可)','haiteiBonusApplied','居合い斬り','backgroundColor','remove','createElement','modalTitle','ヒフミ\x20(1-2-3)\x20ペナルティ！(残り回数-1)','役なし...\x20再挑戦可能\x20(残り','不足！積み上げて再挑戦\x20(残り','row-five-of-a-kind','出目が1～3しかでなくなる。全体倍率+300%。ヒフミに注意！','<div\x20class=\x22card-title\x22>','ロングストレート\x20(1-5)','【全体倍率】ラスト1回で役確定時、全体倍率+200%\x20(累積可)','powerup-card\x20','opacity','ボーナスなし。夏も冬も','ovMsg','zoro','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x2024px;\x20color:\x20#ffd700;\x22>','scoreMult','STAGE\x20CLEAR!','tanyao','シゴロ','carry_over','回数-1','filter','classList','hasLimitDice','zIndex','海底撈月','kumon-status','最終回で役なし','result-yaku','reload','overlay-title','sort','innerHTML','上級能力を選択\x20(この後通常能力も選択)','isYaku','出目が4～6しかでなくなる。全体倍率-50%。ノーカン！ノーカン！','#ff4757','kumonScore','ASCENDANCY','none','pinzorou','isWin','disabled','能力を選択して次へ','row-long-straight','【全体倍率】1投目で役確定時、全体倍率+100%\x20(累積可)','title','yaku','reduce','役なし','flex','bold','四五六','#2ed573','lbl-sigoro','1980ZraOcu','積み上げて振る\x20(残り','normal','\x20/\x20目標:\x20','straightMaster','display','length','btn-clear','「精密動作」スキルを持っていないためロックできません','rulesModal','保険加入','\x20Pt</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#fff','high','finalScore','ゾロ目の達人','rare','stage','zoroBonus','個振り】','ストレート(2-3-4)','red','くもん式','random','overlay','splice','sv-arashi','dice-area','rollCount','rerollBtn','btn-kumon','リロール\x20(残り','fontWeight','reason','四五六の堅守','ストレート(3-4-5)','prestige','2VicwlP','diceCount','</div><div\x20class=\x22card-desc\x22>','fixedSix','buff-list','open-rules-btn','Rolling...\x20(残り','isHiddenYaku','583329CGquAm','80766huMPgo','carryOver','offsetWidth','順子(シュンツ)強化','safe','11400ZGVHsj','ピンゾロ','#a55eea','GAME\x20OVER','ending-modal','unique','#bbb','#ffd700','targetScore','1473129yrlUdc','ストレート\x20(2-3-4\x20/\x203-4-5\x20/\x204-5-6)','精密動作','sigoro','ペナルティ無効','selectionContext','modalDesc','diceLimit','zoro_master','locked','【回復】リロール回数+3','longStraight','block','</div>','一二三の極意','powerup-card\x20card-type-ascendancy','openRulesBtn','hifumiReversal','5428085DdcrLM','ストレートマスター','push','ヒフミ','score-name\x20bad','score-val\x20bad','fill','スコア達成！','kumonStatus','floor','onclick','ステージ','div','ロングストレート','再挑戦可能\x20(残り','map','card-type-prestige','straight','【役倍率】シゴロの得点が+200%\x20(累積可)','iaiBonus','sv-normal','retry','baseScore','message','dice_lock','getElementById','ovTitle','isKumon','type','10px','キャリー','normalEyeBonus','score-name','haiteiBonus','ロック:','arashi','lbl-hifumi','Rolling...','low','出目が2～5しかでなくなる。2-3-4、3-4-5の出目もシゴロと同じ役になる。ヒフミもなければシゴロもピンゾロもない','maxRolls','usedIndices','ゾロ(アラシ)','sv-five-of-a-kind','white','color','サイコロを５つ振り、もっとも点数が高くなる組み合わせで得点を計算する。ただし他に役がない場合はヒフミが優先される','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x2018px;\x20color:\x20#fff;\x22>','className','dice','【役倍率】ピンゾロとアラシの得点が+300%\x20(累積可)','hifumi','apply','appendChild','【成長】クリア時、余った回数×5%ずつ全体倍率が永続アップ','updated','着の身着のまま','<div\x20style=\x22font-size:\x2032px;\x20color:\x20#a4b0be;\x22>役なし</div>','common-modal','起死回生発動！(ペナルティ無効)','textContent','<br>居合:\x20+','8598875xEnnWz','sigoroBonus','475455HDBrfo','ロングストレート\x20(2-6)','kumon-score','ステージクリア！','iai','overlay-msg','baseScoreDisplay','add','基礎練習','target-score','296OBxLeu','で散る...','desc','round','score','toFixed','強化へ進む','スコア不足！振り直してください\x20(残り','score-val\x20updated','btn','iaiBonusApplied','endingModal','rules-modal','global-mult-display','forEach','extraRoll','sv-long-straight','rerollsRemaining','dice_limit','\x20pt</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','style','【技術】「2-3-4」「3-4-5」が役になる(得点はシゴロと同じ)','hiddenYaku','ファイブオブアカインド','fontSize','振る\x20(残り','6MoYHhD','deep_breath','増殖する賽','12OcUNFd','振り直す\x20(残り','isEndless','name','<div\x20style=\x22font-size:\x2016px;\x20color:\x20#ccc;\x22>累積点:\x20','shukusho','modal','36tdIiBU','unused','ヒフミ\x20(1-2-3)','risk','倍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x2048px;\x20font-weight:\x20bold;\x20color:\x20#2ed573;\x20text-shadow:\x200\x200\x2010px\x20rgba(46,\x20213,\x20115,\x200.7);\x20margin-top:\x205px;\x22>','multi_dice','card-container','\x20pt\x20→\x20合計:\x20','で終了\x20(獲得:\x20','msg','stage-num','maxLocks','居合+','straight_master','六固定','sv-pinzorou','buffs','lockedIndices','キャリーオーバー','全体倍率:\x20x'];_0x348b=function(){return _0x2fa510;};return _0x348b();}window['onload']=function(){const _0x3419ee=_0x1ccdd1;state[_0x3419ee(0x153)]=new Array(state[_0x3419ee(0xfa)])['fill'](0x0),drawDice(state['dice']),updateScoreTable(),updateBuffText(),setupRuleButtons(),showAscendancySelection();};function setupRuleButtons(){const _0x4cbb88=_0x1ccdd1;els['openRulesBtn']&&els[_0x4cbb88(0xdd)]&&(els[_0x4cbb88(0x120)]['onclick']=function(){const _0xf5fecc=_0x4cbb88;els['rulesModal'][_0xf5fecc(0x180)][_0xf5fecc(0xd9)]=_0xf5fecc(0xcf),els[_0xf5fecc(0x18f)][_0xf5fecc(0x180)]['display']='none';}),els['closeRulesBtn']&&els[_0x4cbb88(0xdd)]&&(els['closeRulesBtn'][_0x4cbb88(0x12c)]=function(){const _0x29ae18=_0x4cbb88;els[_0x29ae18(0xdd)][_0x29ae18(0x180)][_0x29ae18(0xd9)]=_0x29ae18(0xc4),els['modal'][_0x29ae18(0x180)][_0x29ae18(0xd9)]=_0x29ae18(0xcf);});}function showAscendancySelection(){const _0x5d7005=_0x1ccdd1;els[_0x5d7005(0x18f)][_0x5d7005(0x180)][_0x5d7005(0xd9)]=_0x5d7005(0xcf),els['modalTitle']['textContent']=_0x5d7005(0xc3),els[_0x5d7005(0x116)][_0x5d7005(0x15e)]=_0x5d7005(0x1a4),els[_0x5d7005(0xf1)][_0x5d7005(0x180)][_0x5d7005(0xd9)]=_0x5d7005(0xc4),els[_0x5d7005(0x1ad)][_0x5d7005(0xbd)]='',els['openRulesBtn'][_0x5d7005(0x180)][_0x5d7005(0xd9)]='block',ASCENDANCY_POOL[_0x5d7005(0x17a)](_0x22f1e5=>{const _0x84c637=_0x5d7005,_0x3b757e=document[_0x84c637(0x1b5)](_0x84c637(0x12e));_0x3b757e['className']=_0x84c637(0x11f),_0x3b757e['innerHTML']=_0x84c637(0xa3)+_0x22f1e5[_0x84c637(0xcb)]+_0x84c637(0xfb)+_0x22f1e5[_0x84c637(0x16e)]+'</div>',_0x3b757e[_0x84c637(0x12c)]=()=>selectAscendancy(_0x22f1e5),els[_0x84c637(0x1ad)][_0x84c637(0x157)](_0x3b757e);});}function selectAscendancy(_0xeaa8e9){const _0x357cb9=_0x1ccdd1;_0xeaa8e9[_0x357cb9(0x156)](state),els[_0x357cb9(0x18f)]['style']['display']=_0x357cb9(0xc4),els[_0x357cb9(0x175)][_0x357cb9(0x15e)]='振る\x20(残り'+(0x3+state[_0x357cb9(0x1a0)][_0x357cb9(0x17b)])+'回)',state[_0x357cb9(0x153)]=new Array(state[_0x357cb9(0xfa)])[_0x357cb9(0x128)](0x0),drawDice(state[_0x357cb9(0x153)]),updateBuffText(),updateScoreTable();}function toggleLock(_0x403179){const _0x3a53f2=_0x1ccdd1;if(state[_0x3a53f2(0xf0)]===0x0&&state['dice'][0x0]===0x0)return;if(state['rollCount']>=state[_0x3a53f2(0x14a)]+state[_0x3a53f2(0x1a0)][_0x3a53f2(0x17b)])return;state[_0x3a53f2(0x1a1)][_0x3a53f2(0x1ab)](_0x403179)?state[_0x3a53f2(0x1a1)]=state[_0x3a53f2(0x1a1)][_0x3a53f2(0xb2)](_0x4e6295=>_0x4e6295!==_0x403179):state['lockedIndices'][_0x3a53f2(0xda)]<state[_0x3a53f2(0x1a0)][_0x3a53f2(0x19b)]?state[_0x3a53f2(0x1a1)]['push'](_0x403179):state[_0x3a53f2(0x1a0)][_0x3a53f2(0x19b)]===0x0&&alert(_0x3a53f2(0xdc)),drawDice(state[_0x3a53f2(0x153)]);}function rollDice(){const _0x18a8c7=_0x1ccdd1;if(state[_0x18a8c7(0xf0)]>=state[_0x18a8c7(0x14a)]+state[_0x18a8c7(0x1a0)][_0x18a8c7(0x17b)])return;state[_0x18a8c7(0xf0)]++;const _0x35d015=state[_0x18a8c7(0x14a)]+state[_0x18a8c7(0x1a0)][_0x18a8c7(0x17b)]-state[_0x18a8c7(0xf0)];els[_0x18a8c7(0x175)][_0x18a8c7(0xc7)]=!![],els[_0x18a8c7(0x175)][_0x18a8c7(0x15e)]=_0x18a8c7(0xff)+_0x35d015+'回)',els['btn'][_0x18a8c7(0xb3)][_0x18a8c7(0x1b4)](_0x18a8c7(0xf2)),els[_0x18a8c7(0x199)][_0x18a8c7(0x15e)]=_0x18a8c7(0x147),els[_0x18a8c7(0xcc)][_0x18a8c7(0x15e)]='',els[_0x18a8c7(0xcc)][_0x18a8c7(0x180)][_0x18a8c7(0x14f)]=_0x18a8c7(0x10e);let _0x414c8e=0x0;const _0x44d040=setInterval(()=>{const _0x544c2f=_0x18a8c7;updateDiceValues(![]),drawDice(state[_0x544c2f(0x153)]),_0x414c8e++,_0x414c8e>0xa&&(clearInterval(_0x44d040),finalizeRoll());},0x50);}function finalizeRoll(){const _0x24c101=_0x1ccdd1;updateDiceValues(!![]);let _0x55544e,_0x5dc4bf=[],_0x2f715d=![];const _0xa2a307=checkFiveDiceYaku(state[_0x24c101(0x153)]);if(_0xa2a307)_0x55544e=_0xa2a307,_0x5dc4bf=_0xa2a307[_0x24c101(0x14b)],_0x2f715d=!![],_0x55544e[_0x24c101(0x18c)][_0x24c101(0x1ab)](_0x24c101(0x183))&&!state[_0x24c101(0x182)]['fiveOfAKind']&&(state[_0x24c101(0x182)][_0x24c101(0x1a9)]=!![],updateScoreTable()),_0x55544e[_0x24c101(0x18c)][_0x24c101(0x1ab)](_0x24c101(0x12f))&&!state[_0x24c101(0x182)][_0x24c101(0x11b)]&&(state[_0x24c101(0x182)][_0x24c101(0x11b)]=!![],updateScoreTable());else{const _0x354b61=getBestYaku(state[_0x24c101(0x153)]);_0x55544e=calculateDetailedScore(_0x354b61[_0x24c101(0x14b)][_0x24c101(0x131)](_0x533259=>state['dice'][_0x533259])),_0x55544e[_0x24c101(0x14b)]=_0x354b61[_0x24c101(0x14b)],_0x5dc4bf=_0x354b61[_0x24c101(0x14b)],_0x55544e['isFiveDiceYaku']=![];}drawDice(state[_0x24c101(0x153)],_0x5dc4bf);const _0x408775=_0x55544e;_0x408775[_0x24c101(0x18c)]===_0x24c101(0x125)&&(state[_0x24c101(0x1a0)][_0x24c101(0x121)]?(els['yaku'][_0x24c101(0x15e)]=_0x24c101(0x15d),els[_0x24c101(0xcc)]['style'][_0x24c101(0x14f)]=_0x24c101(0xd2),_0x408775[_0x24c101(0xe2)]=0x0,_0x408775['isYaku']=![]):(state[_0x24c101(0xf0)]++,els[_0x24c101(0xcc)][_0x24c101(0x15e)]=_0x24c101(0x1b7),els[_0x24c101(0xcc)]['style']['color']=_0x24c101(0x109),_0x408775[_0x24c101(0xe2)]=0x0,_0x408775[_0x24c101(0xbf)]=![]));const _0x4ee478=_0x408775['finalScore']+state[_0x24c101(0xc2)],_0x1bdbb4=state[_0x24c101(0x14a)]+state[_0x24c101(0x1a0)][_0x24c101(0x17b)]-state[_0x24c101(0xf0)];if(_0x408775['isYaku']&&_0x408775['finalScore']>0x0){let _0x48049c=_0x24c101(0x151)+_0x408775[_0x24c101(0x18c)]+_0x24c101(0x1a5)+_0x408775[_0x24c101(0x168)]+_0x24c101(0x17f),_0x230931=_0x24c101(0x1a3)+state[_0x24c101(0x1a0)]['scoreMult'][_0x24c101(0x171)](0x2),_0x409076=state[_0x24c101(0x1a0)][_0x24c101(0xac)];_0x408775[_0x24c101(0x176)]>0x0&&(_0x230931+=_0x24c101(0x15f)+_0x408775[_0x24c101(0x176)][_0x24c101(0x171)](0x2)+'倍',_0x409076+=_0x408775['iaiBonusApplied']),_0x408775[_0x24c101(0x1b1)]>0x0&&(_0x230931+='<br>海底:\x20+'+_0x408775[_0x24c101(0x1b1)][_0x24c101(0x171)](0x2)+'倍',_0x409076+=_0x408775[_0x24c101(0x1b1)]),_0x48049c+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x2014px;\x20color:\x20#aaa;\x20margin:\x205px\x200\x2010px\x200;\x20line-height:\x201.5;\x22>'+_0x230931+_0x24c101(0xab)+_0x408775[_0x24c101(0x170)]+'\x20pt\x20×\x20'+_0x409076['toFixed'](0x2)+_0x24c101(0x194)+_0x408775[_0x24c101(0xe2)]+_0x24c101(0xdf),state[_0x24c101(0x1a0)][_0x24c101(0x13d)]&&(_0x48049c+=_0x24c101(0x18d)+state[_0x24c101(0xc2)]+_0x24c101(0x197)+_0x4ee478+'\x20pt</div>'),els[_0x24c101(0xcc)][_0x24c101(0xbd)]=_0x48049c,_0x4ee478>=state[_0x24c101(0x10f)]?(els[_0x24c101(0x199)]['textContent']=_0x24c101(0x129),els[_0x24c101(0x199)][_0x24c101(0x180)][_0x24c101(0x14f)]=_0x24c101(0xd2),endRound({'name':_0x408775[_0x24c101(0x18c)],'score':_0x408775[_0x24c101(0xe2)],'isWin':!![]})):_0x1bdbb4>0x0?(els[_0x24c101(0x199)][_0x24c101(0x15e)]=state[_0x24c101(0x1a0)][_0x24c101(0x13d)]?_0x24c101(0x1b9)+_0x1bdbb4+'回)':_0x24c101(0x173)+_0x1bdbb4+'回)',els[_0x24c101(0x199)][_0x24c101(0x180)]['color']=_0x24c101(0xc1),els['btn'][_0x24c101(0xc7)]=![],state[_0x24c101(0x1a0)][_0x24c101(0x13d)]?(els['btn'][_0x24c101(0x15e)]=_0x24c101(0xd5)+_0x1bdbb4+'回)',els[_0x24c101(0x175)][_0x24c101(0xb3)][_0x24c101(0x169)](_0x24c101(0xf2)),els[_0x24c101(0x175)][_0x24c101(0x12c)]=()=>{const _0x25dbea=_0x24c101;state['kumonScore']+=_0x408775['finalScore'],els['kumonScore'][_0x25dbea(0x15e)]=state[_0x25dbea(0xc2)],rollDice();}):(els['btn']['textContent']=_0x24c101(0x18a)+_0x1bdbb4+'回)',els[_0x24c101(0x175)]['onclick']=rollDice)):(els[_0x24c101(0x199)]['style']['color']=_0x24c101(0x10d),gameOver(_0x4ee478,'スコア不足\x20(合計:\x20'+_0x4ee478+_0x24c101(0xd7)+state[_0x24c101(0x10f)]+')'));}else{if(_0x408775[_0x24c101(0x18c)]===_0x24c101(0x125)&&!_0x408775['isYaku'])_0x1bdbb4>0x0?(els[_0x24c101(0x199)][_0x24c101(0x15e)]=_0x24c101(0x130)+_0x1bdbb4+'回)',els[_0x24c101(0x175)][_0x24c101(0x15e)]=_0x24c101(0x185)+_0x1bdbb4+'回)',els[_0x24c101(0x175)][_0x24c101(0xc7)]=![],els[_0x24c101(0x175)][_0x24c101(0x12c)]=rollDice):endRound({'name':_0x24c101(0xce),'score':0x0,'isWin':![],'reason':_0x24c101(0xb8)});else{els[_0x24c101(0xcc)]['innerHTML']=_0x24c101(0x15b);if(_0x1bdbb4>0x0){if(_0x408775[_0x24c101(0x18c)]!==_0x24c101(0x125))els[_0x24c101(0x199)][_0x24c101(0x15e)]=_0x24c101(0x1b8)+_0x1bdbb4+'回)';els[_0x24c101(0x199)][_0x24c101(0x180)][_0x24c101(0x14f)]=_0x24c101(0x10d),els['btn'][_0x24c101(0x15e)]='振る\x20(残り'+_0x1bdbb4+'回)',els[_0x24c101(0x175)][_0x24c101(0xc7)]=![],els['btn'][_0x24c101(0x12c)]=rollDice;}else endRound({'name':_0x24c101(0xce),'score':0x0,'isWin':![],'reason':_0x24c101(0xb8)});}}}function checkFiveDiceYaku(_0x475c6e){const _0x34b7df=_0x1ccdd1;if(_0x475c6e[_0x34b7df(0xda)]!==0x5)return null;const _0x18bf6a=[..._0x475c6e][_0x34b7df(0xbc)]((_0x3abccf,_0x1ee6fc)=>_0x3abccf-_0x1ee6fc);let _0x3ebce2={'isYaku':![],'name':'','baseScore':0x0,'type':'','isHiddenYaku':![]};if(_0x18bf6a[0x0]===_0x18bf6a[0x4])_0x3ebce2[_0x34b7df(0x18c)]='ファイブオブアカインド\x20('+_0x18bf6a[0x0]+_0x34b7df(0x1a8),_0x3ebce2[_0x34b7df(0x138)]=YAKU_SCORES['fiveOfAKind'],_0x3ebce2[_0x34b7df(0x13e)]='zoro',_0x3ebce2[_0x34b7df(0xbf)]=!![],_0x3ebce2[_0x34b7df(0x100)]=!![];else(_0x18bf6a[0x0]===0x1&&_0x18bf6a[0x1]===0x2&&_0x18bf6a[0x2]===0x3&&_0x18bf6a[0x3]===0x4&&_0x18bf6a[0x4]===0x5||_0x18bf6a[0x0]===0x2&&_0x18bf6a[0x1]===0x3&&_0x18bf6a[0x2]===0x4&&_0x18bf6a[0x3]===0x5&&_0x18bf6a[0x4]===0x6)&&(_0x3ebce2['name']=_0x18bf6a[0x0]===0x1?_0x34b7df(0xa4):_0x34b7df(0x163),_0x3ebce2[_0x34b7df(0x138)]=YAKU_SCORES[_0x34b7df(0x11b)],_0x3ebce2['type']=_0x34b7df(0x133),_0x3ebce2[_0x34b7df(0xbf)]=!![],_0x3ebce2[_0x34b7df(0x100)]=!![]);if(_0x3ebce2['isYaku']){let _0x31747c=0x1;if(_0x3ebce2[_0x34b7df(0x13e)]===_0x34b7df(0xaa))_0x31747c+=state['buffs'][_0x34b7df(0xe6)];else _0x3ebce2[_0x34b7df(0x13e)]===_0x34b7df(0x133)&&(_0x31747c+=state[_0x34b7df(0x1a0)][_0x34b7df(0x161)]);const _0x29c35b=Math[_0x34b7df(0x12b)](_0x3ebce2[_0x34b7df(0x138)]*_0x31747c);let _0x2fb77c=0x0,_0x28f651=0x0;state['rollCount']===0x1&&state[_0x34b7df(0x1a0)][_0x34b7df(0x135)]>0x0&&(_0x2fb77c=state[_0x34b7df(0x1a0)][_0x34b7df(0x135)]);const _0x415052=state[_0x34b7df(0x14a)]+state[_0x34b7df(0x1a0)][_0x34b7df(0x17b)]-state['rollCount'];_0x415052===0x0&&state[_0x34b7df(0x1a0)][_0x34b7df(0x143)]>0x0&&(_0x28f651=state[_0x34b7df(0x1a0)][_0x34b7df(0x143)]);let _0x5a4bf1=state[_0x34b7df(0x1a0)][_0x34b7df(0xac)]+_0x2fb77c+_0x28f651,_0x2121dc=Math['floor'](_0x29c35b*_0x5a4bf1);return{'isYaku':!![],'name':_0x3ebce2[_0x34b7df(0x18c)],'baseScoreDisplay':Math[_0x34b7df(0x12b)](_0x3ebce2[_0x34b7df(0x138)]*_0x31747c),'score':_0x29c35b,'finalScore':_0x2121dc,'iaiBonusApplied':_0x2fb77c,'haiteiBonusApplied':_0x28f651,'usedIndices':[0x0,0x1,0x2,0x3,0x4],'isFiveDiceYaku':!![],'type':_0x3ebce2['type']};}return null;}function updateDiceValues(_0x156e48){const _0xedc850=_0x1ccdd1;while(state[_0xedc850(0x153)][_0xedc850(0xda)]<state[_0xedc850(0xfa)])state['dice'][_0xedc850(0x124)](0x0);for(let _0x408283=0x0;_0x408283<state[_0xedc850(0xfa)];_0x408283++){if(state[_0xedc850(0x1a1)][_0xedc850(0x1ab)](_0x408283))continue;let _0x5599f8=getRandDice();if(_0x408283===0x0&&state['buffs'][_0xedc850(0xfc)])_0x5599f8=0x6;state[_0xedc850(0x153)][_0x408283]=_0x5599f8;}}function getRandDice(){const _0x4a4f10=_0x1ccdd1;if(state[_0x4a4f10(0x1a0)]['diceLimit']===_0x4a4f10(0x148))return Math['floor'](Math['random']()*0x3)+0x1;if(state[_0x4a4f10(0x1a0)]['diceLimit']===_0x4a4f10(0xe1))return Math[_0x4a4f10(0x12b)](Math['random']()*0x3)+0x4;if(state[_0x4a4f10(0x1a0)][_0x4a4f10(0x117)]===_0x4a4f10(0xae))return Math['floor'](Math[_0x4a4f10(0xeb)]()*0x4)+0x2;return Math[_0x4a4f10(0x12b)](Math[_0x4a4f10(0xeb)]()*0x6)+0x1;}function _0x3cb8(_0x52d8e1,_0x2b1f2f){_0x52d8e1=_0x52d8e1-0xa1;const _0x348bc6=_0x348b();let _0x3cb8b7=_0x348bc6[_0x52d8e1];return _0x3cb8b7;}function drawDice(_0x423cc9,_0x522741=null){const _0x38ad75=_0x1ccdd1,_0x4f8bf6=['?','⚀','⚁','⚂','⚃','⚄','⚅'];els[_0x38ad75(0x1ac)][_0x38ad75(0xbd)]='',_0x423cc9[_0x38ad75(0x17a)]((_0x277ec6,_0x37edcb)=>{const _0x468d9d=_0x38ad75,_0x1c0e19=document['createElement'](_0x468d9d(0x12e));_0x1c0e19[_0x468d9d(0x152)]='dice',_0x1c0e19[_0x468d9d(0x15e)]=_0x4f8bf6[_0x277ec6];if(_0x277ec6===0x1)_0x1c0e19['classList'][_0x468d9d(0x169)](_0x468d9d(0xe9));if(_0x37edcb===0x0&&state[_0x468d9d(0x1a0)][_0x468d9d(0xfc)])_0x1c0e19['classList']['add']('fixed-six');if(state['lockedIndices'][_0x468d9d(0x1ab)](_0x37edcb))_0x1c0e19[_0x468d9d(0xb3)][_0x468d9d(0x169)](_0x468d9d(0x119));_0x522741!==null&&(!_0x522741[_0x468d9d(0x1ab)](_0x37edcb)?_0x1c0e19['classList'][_0x468d9d(0x169)](_0x468d9d(0x191)):(_0x1c0e19[_0x468d9d(0x180)][_0x468d9d(0x1b3)]=_0x468d9d(0xe0),_0x1c0e19[_0x468d9d(0x180)]['borderColor']='#ffd700',_0x1c0e19[_0x468d9d(0x180)][_0x468d9d(0xb5)]=0x2)),_0x1c0e19[_0x468d9d(0x12c)]=()=>toggleLock(_0x37edcb),els[_0x468d9d(0x1ac)]['appendChild'](_0x1c0e19);});}function getBestYaku(_0x53708b){const _0x2e2465=_0x1ccdd1;if(_0x53708b[_0x2e2465(0xda)]===0x3){const _0x4dd663=calculateScore([_0x53708b[0x0],_0x53708b[0x1],_0x53708b[0x2]]);return{'result':_0x4dd663,'usedIndices':[0x0,0x1,0x2]};}let _0x1d74b6=-0x1,_0x12548d=null,_0x130410=[];const _0x134239=_0x53708b[_0x2e2465(0xda)];for(let _0x2a6bef=0x0;_0x2a6bef<_0x134239-0x2;_0x2a6bef++){for(let _0x4c2eb3=_0x2a6bef+0x1;_0x4c2eb3<_0x134239-0x1;_0x4c2eb3++){for(let _0x109c58=_0x4c2eb3+0x1;_0x109c58<_0x134239;_0x109c58++){const _0xa28edb=[_0x53708b[_0x2a6bef],_0x53708b[_0x4c2eb3],_0x53708b[_0x109c58]],_0x1905d8=calculateScore(_0xa28edb);if(_0x1905d8[_0x2e2465(0x170)]>_0x1d74b6)_0x1d74b6=_0x1905d8[_0x2e2465(0x170)],_0x12548d=_0x1905d8,_0x130410=[_0x2a6bef,_0x4c2eb3,_0x109c58];else _0x1905d8[_0x2e2465(0x18c)]===_0x2e2465(0x125)&&_0x12548d&&_0x12548d['name']==='役なし'&&(_0x1d74b6=_0x1905d8['score'],_0x12548d=_0x1905d8,_0x130410=[_0x2a6bef,_0x4c2eb3,_0x109c58]);}}}return{'result':_0x12548d,'usedIndices':_0x130410};}function calculateDetailedScore(_0x59b16b){const _0xe9c8ca=_0x1ccdd1,_0x4a4945=[..._0x59b16b][_0xe9c8ca(0xbc)]((_0x2ff520,_0x127832)=>_0x2ff520-_0x127832);let _0x1fcef8='',_0x39423a=0x0,_0x41d6fd=!![],_0x1dac78=_0xe9c8ca(0xd6);if(_0x4a4945[0x0]===0x1&&_0x4a4945[0x1]===0x1&&_0x4a4945[0x2]===0x1)_0x1fcef8=_0xe9c8ca(0x108),_0x39423a=YAKU_SCORES[_0xe9c8ca(0xc5)],_0x1dac78=_0xe9c8ca(0xaa);else{if(_0x4a4945[0x0]===_0x4a4945[0x1]&&_0x4a4945[0x1]===_0x4a4945[0x2])_0x1fcef8=_0x4a4945[0x0]+_0xe9c8ca(0x14c),_0x39423a=YAKU_SCORES[_0xe9c8ca(0x145)],_0x1dac78=_0xe9c8ca(0xaa);else{if(_0x4a4945[0x0]===0x4&&_0x4a4945[0x1]===0x5&&_0x4a4945[0x2]===0x6)_0x1fcef8=_0xe9c8ca(0xaf),_0x39423a=YAKU_SCORES[_0xe9c8ca(0x113)],_0x1dac78='straight';else{if(state[_0xe9c8ca(0x1a0)]['straightMaster']&&_0x4a4945[0x0]===0x2&&_0x4a4945[0x1]===0x3&&_0x4a4945[0x2]===0x4)_0x1fcef8=_0xe9c8ca(0xe8),_0x39423a=YAKU_SCORES[_0xe9c8ca(0x113)],_0x1dac78=_0xe9c8ca(0x133);else{if(state[_0xe9c8ca(0x1a0)][_0xe9c8ca(0xd8)]&&_0x4a4945[0x0]===0x3&&_0x4a4945[0x1]===0x4&&_0x4a4945[0x2]===0x5)_0x1fcef8=_0xe9c8ca(0xf7),_0x39423a=YAKU_SCORES[_0xe9c8ca(0x113)],_0x1dac78=_0xe9c8ca(0x133);else{if(_0x4a4945[0x0]===0x1&&_0x4a4945[0x1]===0x2&&_0x4a4945[0x2]===0x3)_0x1fcef8='ヒフミ',_0x39423a=YAKU_SCORES[_0xe9c8ca(0x155)];else{if(_0x4a4945[0x0]===_0x4a4945[0x1])_0x1fcef8=_0x4a4945[0x2]+'の目',_0x39423a=_0x4a4945[0x2]*0x64;else _0x4a4945[0x1]===_0x4a4945[0x2]?(_0x1fcef8=_0x4a4945[0x0]+'の目',_0x39423a=_0x4a4945[0x0]*0x64):(_0x41d6fd=![],_0x1fcef8=_0xe9c8ca(0xce));}}}}}}let _0x418d7b=0x1;if(_0x1dac78===_0xe9c8ca(0xaa))_0x418d7b+=state[_0xe9c8ca(0x1a0)]['zoroBonus'];else{if(_0x1fcef8[_0xe9c8ca(0x1ab)]('の目'))_0x418d7b+=state[_0xe9c8ca(0x1a0)]['normalEyeBonus'];else _0x1dac78==='straight'&&(_0x418d7b+=state[_0xe9c8ca(0x1a0)][_0xe9c8ca(0x161)]);}const _0x35064e=Math['floor'](_0x39423a*_0x418d7b);let _0x476b10=0x0,_0x2fffc7=0x0;state['rollCount']===0x1&&state[_0xe9c8ca(0x1a0)][_0xe9c8ca(0x135)]>0x0&&_0x41d6fd&&_0x39423a>0x0&&(_0x476b10=state['buffs'][_0xe9c8ca(0x135)]);const _0x3bcad6=state[_0xe9c8ca(0x14a)]+state['buffs'][_0xe9c8ca(0x17b)]-state[_0xe9c8ca(0xf0)];_0x3bcad6===0x0&&state[_0xe9c8ca(0x1a0)][_0xe9c8ca(0x143)]>0x0&&_0x41d6fd&&_0x39423a>0x0&&(_0x2fffc7=state['buffs']['haiteiBonus']);let _0x13650a=state['buffs'][_0xe9c8ca(0xac)]+_0x476b10+_0x2fffc7,_0x2bcaf8=0x0;return _0x41d6fd&&_0x39423a>0x0&&(_0x2bcaf8=Math[_0xe9c8ca(0x12b)](_0x35064e*_0x13650a)),{'isYaku':_0x41d6fd,'name':_0x1fcef8,'baseScoreDisplay':Math[_0xe9c8ca(0x12b)](_0x39423a*_0x418d7b),'score':_0x35064e,'finalScore':_0x2bcaf8,'iaiBonusApplied':_0x476b10,'haiteiBonusApplied':_0x2fffc7,'usedIndices':[0x0,0x1,0x2],'isFiveDiceYaku':![],'type':_0x1dac78};}function calculateScore(_0x2e550c){const _0x4b9673=_0x1ccdd1,_0x1cd696=calculateDetailedScore(_0x2e550c);return{'isYaku':_0x1cd696['isYaku'],'name':_0x1cd696[_0x4b9673(0x18c)],'score':_0x1cd696['score']};}function endRound(_0x229c98){const _0x1879d5=_0x1ccdd1;state['lockedIndices']=[];if(state[_0x1879d5(0x1a0)][_0x1879d5(0x103)]){const _0x2ecccc=state[_0x1879d5(0x14a)]+state[_0x1879d5(0x1a0)][_0x1879d5(0x17b)]-state[_0x1879d5(0xf0)];if(_0x2ecccc>0x0){const _0x19efba=_0x2ecccc*0.05;state[_0x1879d5(0x1a0)][_0x1879d5(0xac)]+=_0x19efba,els['globalMult'][_0x1879d5(0x15e)]='x'+state[_0x1879d5(0x1a0)][_0x1879d5(0xac)][_0x1879d5(0x171)](0x2);}}if(_0x229c98[_0x1879d5(0xc6)])els[_0x1879d5(0x199)]['textContent']=_0x1879d5(0x165),els['msg']['style']['color']=_0x1879d5(0x10e),state[_0x1879d5(0xe5)]===0x14&&!state[_0x1879d5(0x18b)]?setTimeout(()=>{const _0x299a72=_0x1879d5;els[_0x299a72(0x177)]['style'][_0x299a72(0xd9)]=_0x299a72(0xcf);},0x3e8):(els[_0x1879d5(0x175)][_0x1879d5(0x15e)]=_0x1879d5(0x172),els[_0x1879d5(0x175)]['disabled']=![],els[_0x1879d5(0x175)][_0x1879d5(0xb3)][_0x1879d5(0x169)](_0x1879d5(0xdb)),els['btn'][_0x1879d5(0xb3)][_0x1879d5(0x1b4)](_0x1879d5(0xf2)),els[_0x1879d5(0x175)]['onclick']=()=>{const _0x39450b=_0x1879d5;state[_0x39450b(0xe5)]%0x5===0x0?showPrestige():showPowerups();});else{const _0x47845a=_0x229c98[_0x1879d5(0xf5)]||_0x1879d5(0xce);setTimeout(()=>gameOver(_0x229c98[_0x1879d5(0x170)]+state['kumonScore'],_0x47845a),0x3e8);}}function goEndless(){const _0x37f1cf=_0x1ccdd1;state['isEndless']=!![],els[_0x37f1cf(0x177)][_0x37f1cf(0x180)][_0x37f1cf(0xd9)]=_0x37f1cf(0xc4),state[_0x37f1cf(0xe5)]%0x5===0x0?showPrestige():showPowerups();}function showPrestige(){const _0x2fae10=_0x1ccdd1;state['selectionContext']='prestige',els['modal'][_0x2fae10(0x180)][_0x2fae10(0xd9)]='flex',els[_0x2fae10(0x1b6)][_0x2fae10(0x15e)]='PRESTIGE!',els[_0x2fae10(0x116)][_0x2fae10(0x15e)]=_0x2fae10(0xbe),els[_0x2fae10(0x1b6)][_0x2fae10(0x180)][_0x2fae10(0x14f)]=_0x2fae10(0x109),els['rerollBtn'][_0x2fae10(0x180)][_0x2fae10(0xd9)]='block',els[_0x2fae10(0x120)][_0x2fae10(0x180)][_0x2fae10(0xd9)]=_0x2fae10(0x11c),renderCards(PRESTIGE_POOL),updateRerollBtn();}function showPowerups(){const _0x13dd03=_0x1ccdd1;state[_0x13dd03(0x115)]=_0x13dd03(0xd6),els[_0x13dd03(0x18f)][_0x13dd03(0x180)][_0x13dd03(0xd9)]=_0x13dd03(0xcf),els['modalTitle']['textContent']=_0x13dd03(0xad),els[_0x13dd03(0x116)]['textContent']=_0x13dd03(0xc8),els[_0x13dd03(0x1b6)][_0x13dd03(0x180)][_0x13dd03(0x14f)]=_0x13dd03(0x10e),els[_0x13dd03(0xf1)]['style'][_0x13dd03(0xd9)]=_0x13dd03(0x11c),els[_0x13dd03(0x120)][_0x13dd03(0x180)]['display']=_0x13dd03(0x11c),renderCards(POWERUP_POOL),updateRerollBtn();}function renderCards(_0x5d0fbd){const _0x6e16ce=_0x1ccdd1;els[_0x6e16ce(0x1ad)]['innerHTML']='';let _0x5f3426=_0x5d0fbd['filter'](_0x590fa3=>{const _0x18c40e=_0x6e16ce;if(_0x590fa3[_0x18c40e(0x10c)]){if(_0x590fa3['id']==='hifumi_rev'&&state[_0x18c40e(0x1a0)]['hifumiReversal'])return![];if(_0x590fa3['id']===_0x18c40e(0x19d)&&state['buffs'][_0x18c40e(0xd8)])return![];if(_0x590fa3['id']===_0x18c40e(0xb0)&&state[_0x18c40e(0x1a0)]['carryOver'])return![];}if(_0x590fa3['exclusive']===_0x18c40e(0x17e)&&state['buffs'][_0x18c40e(0xb4)])return![];if(_0x590fa3['id']===_0x18c40e(0x1aa)&&(state[_0x18c40e(0x1a0)]['diceLimit']==='high'||state[_0x18c40e(0x1a0)]['diceLimit']==='tanyao'))return![];if(_0x590fa3['id']===_0x18c40e(0x19d)&&(state[_0x18c40e(0x1a0)][_0x18c40e(0x117)]===_0x18c40e(0x148)||state[_0x18c40e(0x1a0)][_0x18c40e(0x117)]===_0x18c40e(0xe1)))return![];if(_0x590fa3['id']==='sigoro_boost'){if(state[_0x18c40e(0x1a0)][_0x18c40e(0x117)]===_0x18c40e(0x148))return![];}if(_0x590fa3['id']===_0x18c40e(0x195)&&state[_0x18c40e(0xfa)]>=0x5)return![];if(_0x590fa3['id']==='dice_lock'&&state[_0x18c40e(0x1a0)][_0x18c40e(0x19b)]>=0x2)return![];if(_0x590fa3['id']==='shukusho'&&state[_0x18c40e(0x14a)]+state[_0x18c40e(0x1a0)][_0x18c40e(0x17b)]<=0x1)return![];return!![];});const _0x3179dd=[];for(let _0x1a710c=0x0;_0x1a710c<0x3;_0x1a710c++){if(_0x5f3426[_0x6e16ce(0xda)]===0x0)break;let _0x2b582e=_0x5f3426[_0x6e16ce(0xcd)]((_0x2dbc4a,_0x39e6ee)=>_0x2dbc4a+(_0x39e6ee['weight']||0x64),0x0),_0x592a7e=Math[_0x6e16ce(0xeb)]()*_0x2b582e;for(let _0x189b06=0x0;_0x189b06<_0x5f3426['length'];_0x189b06++){const _0x873ff6=_0x5f3426[_0x189b06],_0x42d2a1=_0x873ff6['weight']||0x64;if(_0x592a7e<_0x42d2a1){_0x3179dd[_0x6e16ce(0x124)](_0x873ff6),_0x5f3426[_0x6e16ce(0xed)](_0x189b06,0x1);break;}_0x592a7e-=_0x42d2a1;}}_0x3179dd[_0x6e16ce(0x17a)](_0xed7cb7=>{const _0x2ca75b=_0x6e16ce,_0x969d01=document[_0x2ca75b(0x1b5)](_0x2ca75b(0x12e)),_0x3002d5=state['selectionContext']==='prestige'?_0x2ca75b(0x132):'card-type-'+(_0xed7cb7['type']||_0x2ca75b(0x106));_0x969d01['className']=_0x2ca75b(0xa6)+_0x3002d5,_0x969d01[_0x2ca75b(0xbd)]=_0x2ca75b(0xa3)+_0xed7cb7[_0x2ca75b(0xcb)]+_0x2ca75b(0xfb)+_0xed7cb7[_0x2ca75b(0x16e)]+_0x2ca75b(0x11d),_0x969d01[_0x2ca75b(0x12c)]=()=>selectCard(_0xed7cb7),els[_0x2ca75b(0x1ad)][_0x2ca75b(0x157)](_0x969d01);});}function updateRerollBtn(){const _0x400440=_0x1ccdd1;els[_0x400440(0xf1)][_0x400440(0x15e)]=_0x400440(0xf3)+state[_0x400440(0x17d)]+'回)',state['rerollsRemaining']<=0x0?(els['rerollBtn'][_0x400440(0xc7)]=!![],els[_0x400440(0xf1)][_0x400440(0x180)][_0x400440(0xa7)]=0.5):(els['rerollBtn'][_0x400440(0xc7)]=![],els[_0x400440(0xf1)]['style'][_0x400440(0xa7)]=0x1);}function rerollPowerups(){const _0x5dd7c7=_0x1ccdd1;state[_0x5dd7c7(0x17d)]>0x0&&(state['rerollsRemaining']--,state[_0x5dd7c7(0x115)]===_0x5dd7c7(0xf8)?renderCards(PRESTIGE_POOL):renderCards(POWERUP_POOL),updateRerollBtn());}function selectCard(_0x5dd7bc){const _0xc38a07=_0x1ccdd1;_0x5dd7bc[_0xc38a07(0x156)](state),state[_0xc38a07(0x115)]===_0xc38a07(0xf8)?showPowerups():nextStage();}function nextStage(){const _0x219dff=_0x1ccdd1;state[_0x219dff(0xe5)]++;let _0x4517b2=0x0;if(state[_0x219dff(0xe5)]<=0x5)_0x4517b2=(state['stage']+0x1)*0x64;else{if(state[_0x219dff(0xe5)]<=0xa)_0x4517b2=0x3e8+state[_0x219dff(0xe5)]*0xc8;else state[_0x219dff(0xe5)]<=0x14?_0x4517b2=0x7d0+state[_0x219dff(0xe5)]*0x1f4:_0x4517b2=Math['floor'](state['targetScore']*0.4);}state[_0x219dff(0x10f)]+=_0x4517b2,state[_0x219dff(0xf0)]=0x0,state[_0x219dff(0xc2)]=0x0,state[_0x219dff(0x153)]=new Array(state[_0x219dff(0xfa)])[_0x219dff(0x128)](0x0),state[_0x219dff(0x1a1)]=[],els[_0x219dff(0x18f)][_0x219dff(0x180)][_0x219dff(0xd9)]=_0x219dff(0xc4),els[_0x219dff(0xe5)]['textContent']=state['stage'],els[_0x219dff(0x1ae)][_0x219dff(0x15e)]=state[_0x219dff(0x10f)],els['kumonScore'][_0x219dff(0x15e)]='0',els[_0x219dff(0x199)][_0x219dff(0x15e)]='サイコロを振ってください',els['msg']['style'][_0x219dff(0x14f)]=_0x219dff(0x10d),els[_0x219dff(0xcc)]['textContent']='',els[_0x219dff(0xcc)][_0x219dff(0x180)]['color']='#ffd700',els['btn']['textContent']=_0x219dff(0x185)+(0x3+state[_0x219dff(0x1a0)][_0x219dff(0x17b)])+'回)',els['btn'][_0x219dff(0xc7)]=![],els['btn']['onclick']=rollDice,els['btn'][_0x219dff(0xb3)]['remove'](_0x219dff(0xdb)),drawDice(state['dice']),updateBuffText(),updateScoreTable();}function updateBuffText(){const _0x299332=_0x1ccdd1;let _0x5f52cc=[];_0x5f52cc[_0x299332(0x124)]('【'+state[_0x299332(0xfa)]+_0x299332(0xe7));if(state[_0x299332(0x1a0)][_0x299332(0x19b)]>0x0)_0x5f52cc[_0x299332(0x124)](_0x299332(0x144)+state[_0x299332(0x1a0)][_0x299332(0x19b)]);if(state['buffs']['fixedSix'])_0x5f52cc['push'](_0x299332(0x19e));else{if(state[_0x299332(0x1a0)][_0x299332(0x117)]===_0x299332(0x148))_0x5f52cc['push'](_0x299332(0x1af));else{if(state[_0x299332(0x1a0)][_0x299332(0x117)]===_0x299332(0xe1))_0x5f52cc[_0x299332(0x124)](_0x299332(0xd1));else{if(state['buffs'][_0x299332(0x117)]==='tanyao')_0x5f52cc[_0x299332(0x124)]('タンヤオ');}}}if(state[_0x299332(0x1a0)][_0x299332(0x121)])_0x5f52cc[_0x299332(0x124)]('逆転');if(state[_0x299332(0x1a0)][_0x299332(0xd8)])_0x5f52cc[_0x299332(0x124)]('連番');if(state[_0x299332(0x1a0)][_0x299332(0x13d)])_0x5f52cc[_0x299332(0x124)]('くもん');if(state[_0x299332(0x1a0)][_0x299332(0x103)])_0x5f52cc['push'](_0x299332(0x140));if(state[_0x299332(0x1a0)][_0x299332(0x135)]>0x0)_0x5f52cc[_0x299332(0x124)](_0x299332(0x19c)+Math['round'](state[_0x299332(0x1a0)]['iaiBonus']*0x64)+'%');if(state[_0x299332(0x1a0)][_0x299332(0x143)]>0x0)_0x5f52cc[_0x299332(0x124)]('海底+'+Math[_0x299332(0x16f)](state[_0x299332(0x1a0)][_0x299332(0x143)]*0x64)+'%');els['globalMult']['textContent']='x'+state[_0x299332(0x1a0)]['scoreMult'][_0x299332(0x171)](0x2),els[_0x299332(0x1a0)][_0x299332(0x15e)]=_0x5f52cc[_0x299332(0xda)]>0x0?_0x5f52cc['join'](','):'なし';}function updateScoreTable(){const _0x1938f1=_0x1ccdd1,_0x49a630=state[_0x1938f1(0x1a0)],_0x3d4655=0x1+_0x49a630[_0x1938f1(0xe6)],_0x5e1893=0x1+_0x49a630[_0x1938f1(0x161)],_0x325c00=document[_0x1938f1(0x13b)](_0x1938f1(0xa1)),_0x5d8b85=document[_0x1938f1(0x13b)](_0x1938f1(0xc9));if(state[_0x1938f1(0x182)][_0x1938f1(0x1a9)]){_0x325c00[_0x1938f1(0x180)][_0x1938f1(0xd9)]=_0x1938f1(0xcf);const _0x18264d=Math['floor'](YAKU_SCORES[_0x1938f1(0x1a9)]*_0x3d4655);updateVal(_0x1938f1(0x14d),_0x18264d);}else _0x325c00[_0x1938f1(0x180)][_0x1938f1(0xd9)]='none';if(state['hiddenYaku'][_0x1938f1(0x11b)]){_0x5d8b85[_0x1938f1(0x180)][_0x1938f1(0xd9)]=_0x1938f1(0xcf);const _0x185888=Math[_0x1938f1(0x12b)](YAKU_SCORES[_0x1938f1(0x11b)]*_0x5e1893);updateVal(_0x1938f1(0x17c),_0x185888);}else _0x5d8b85[_0x1938f1(0x180)]['display']=_0x1938f1(0xc4);updateVal(_0x1938f1(0x19f),Math['floor'](YAKU_SCORES[_0x1938f1(0xc5)]*_0x3d4655)),updateVal(_0x1938f1(0xee),Math[_0x1938f1(0x12b)](YAKU_SCORES[_0x1938f1(0x145)]*_0x3d4655)),updateVal(_0x1938f1(0x1a7),Math[_0x1938f1(0x12b)](YAKU_SCORES[_0x1938f1(0x113)]*_0x5e1893));const _0x468af8=Math[_0x1938f1(0x12b)](0x64*(0x1+_0x49a630[_0x1938f1(0x141)]));updateVal(_0x1938f1(0x136),'出目\x20×\x20'+_0x468af8);_0x49a630[_0x1938f1(0xd8)]&&(document[_0x1938f1(0x13b)](_0x1938f1(0xd3))[_0x1938f1(0x15e)]=_0x1938f1(0x111));const _0x1fcf10=document['getElementById'](_0x1938f1(0x146)),_0x12b17d=document[_0x1938f1(0x13b)]('sv-hifumi');_0x49a630[_0x1938f1(0x121)]?(_0x1fcf10['textContent']='起死回生\x20(1-2-3)',_0x1fcf10[_0x1938f1(0x152)]=_0x1938f1(0x142),_0x12b17d[_0x1938f1(0x15e)]=_0x1938f1(0x114),_0x12b17d['className']=_0x1938f1(0x174),_0x12b17d[_0x1938f1(0x180)][_0x1938f1(0x184)]=_0x1938f1(0x13f)):(_0x1fcf10[_0x1938f1(0x15e)]=_0x1938f1(0x192),_0x1fcf10[_0x1938f1(0x152)]=_0x1938f1(0x126),_0x12b17d[_0x1938f1(0x15e)]=_0x1938f1(0xb1),_0x12b17d[_0x1938f1(0x152)]=_0x1938f1(0x127),_0x12b17d[_0x1938f1(0x180)]['fontSize']='');}function updateVal(_0x44231a,_0x432c5b){const _0x2bb6ac=_0x1ccdd1,_0x3e4322=document[_0x2bb6ac(0x13b)](_0x44231a);_0x3e4322[_0x2bb6ac(0x15e)]!=_0x432c5b&&(_0x3e4322[_0x2bb6ac(0x15e)]=_0x432c5b,_0x3e4322[_0x2bb6ac(0xb3)]['remove']('updated'),void _0x3e4322[_0x2bb6ac(0x104)],_0x3e4322['classList']['add'](_0x2bb6ac(0x159)));}function gameOver(_0x38c869,_0x113b85){const _0x34515c=_0x1ccdd1;els[_0x34515c(0xec)]['style']['display']='flex',els[_0x34515c(0x13c)]['textContent']=_0x34515c(0x10a),_0x113b85?(els['ovMsg']['innerHTML']=_0x113b85+'<br><br>ステージ'+state[_0x34515c(0xe5)]+_0x34515c(0x16d),els['ovMsg'][_0x34515c(0x180)][_0x34515c(0x14f)]=_0x34515c(0xc1),els['ovMsg'][_0x34515c(0x180)][_0x34515c(0xf4)]=_0x34515c(0xd0)):(els[_0x34515c(0xa9)]['textContent']=_0x34515c(0x12d)+state[_0x34515c(0xe5)]+_0x34515c(0x198)+_0x38c869+_0x34515c(0xd7)+state[_0x34515c(0x10f)]+')',els['ovMsg']['style']['color']=_0x34515c(0x14e));}function resetGame(){const _0x44d93c=_0x1ccdd1;location[_0x44d93c(0xba)]();}
</script>
</body>
</html>
